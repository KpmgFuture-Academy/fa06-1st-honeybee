# 데이터 기반 Smartfarm TomatoGrow AutoControl Solution

---

## 1. 프로젝트 개요
- **프로젝트 명**: 데이터 기반 Smartfarm TomatoGrow AutoControl Solution  
- **프로젝트 기간**: 2025-08-11(월) ~ 2025-08-18(월)  
- **팀 명**: Smart_HoneyBee  
- **참여 인원**: 1명(김채완)

---

## 2. 프로젝트 일정

| 작업 항목               | 시작 일시         | 종료 일시         | 기간(시간) |
|------------------------|-------------------|-------------------|-----------|
| 프로젝트 방향 설정      | 2025-08-11 09:00  | 2025-08-11 18:00  | 8시간     |
| 문제 및 요구사항 정의  | 2025-08-12 09:00  | 2025-08-12 18:00  | 8시간     |
| 데이터 수집            | 2025-08-13 09:00  | 2025-08-13 18:00  | 8시간     |
| WBS 작성               | 2025-08-14 09:00  | 2025-08-14 13:00  | 4시간     |
| 데이터 분석            | 2025-08-14 14:00  | 2025-08-15 13:00  | 8시간     |
| 제어 코드 작성         | 2025-08-15 14:00  | 2025-08-15 18:00  | 4시간     |
| 발표 자료 준비·피드백  | 2025-08-16 09:00  | 2025-08-16 18:00  | 8시간     |
| 발표                   | 2025-08-17        | 2025-08-17        | —         |
| **합계**               |                   |                   | **48시간** |

---

## 3. 문제 정의
현재 시중 MCU 기반 스마트팜 제어는 **고정값·단순 임계치 제어**에 치중.  
**실측 데이터 분석**으로 도출한 **최적 환경 수치**를 반영하는 **데이터 기반 자동 제어 코드**가 부재.

### 3-1) 스마트 토마토 재배 현황
| 권역   | 전체 농가 비율(%) | 토마토 재배 비율(%) | 딸기 재배 비율(%) | 화훼 재배 비율(%) |
|-------|-------------------:|--------------------:|------------------:|------------------:|
| 호남권 | 34.1 | 46.6 | 41.1 | -   |
| 영남권 | 28.2 | 32.0 | 22.9 | -   |
| 수도권 | 19.4 | 5.9  | 4.6  | 85.1 |
> 토마토 재배 비율이 가장 높음.

### 3-2) 스마트팜 도입에 따른 소득 증가
| 구분                             | 1년차  | 2년차  | 3년차 | 4년차 | 5년차 이상 |
|---------------------------------|:------:|:------:|:-----:|:-----:|:----------:|
| 전년대비 소득 변화율 - 도입농가 | 37.13% | 22.59% | 4.14% | 11.72% | 19.65% |
| 전년대비 소득 변화율 - 미도입농가 | 1.79% | 1.79% | 1.79% | 1.79% | 1.79% |
| 전년대비 소득 변화율 - **순(Net)효과** | 35.34% | 20.80% | 2.69% | 9.93% | 17.86% |
| **미도입 대비 소득 증가율 추정치** | 35.34% | 63.49% | 67.89% | 84.56% | 117.52% |
> 5년차 기준 **2배 이상** 소득(＋노동강도·삶의 질 개선 기대).

### 3-3) ICT 데이터 수집·분석 활용
| 구분         | 실시(%) | 미실시(%) | (실시 시) 자가(%) | (실시 시) 외부기관(%) |
|--------------|:-------:|:---------:|:-----------------:|:---------------------:|
| 데이터 수집  | 61.1    | 38.9      | 28.6              | 71.4                  |
| 데이터 분석  | 32.3    | 67.7      | 38.1              | 61.9                  |
> 재배 경영체의 **데이터 수집·분석 활용 낮음**, 외부기관 의존.

### 3-4) 기업체(1,286개) 빅데이터·AI 활용 현황
| 구분                 | 보유·활용(%) | 미보유·미활용(%) | 존재모름(%) |
|----------------------|:------------:|:----------------:|:-----------:|
| 인공지능 기술        | 2.7          | 97.3             | —           |
| 빅데이터 관련 기술   | 2.7          | 97.3             | —           |
| 공공데이터포털 활용  | 4.1          | 70.1             | 25.8        |
| 스마트팜코리아 활용  | 10.7         | 85.9             | 3.3         |
| AI 허브 활용         | 1.6          | 58.6             | 39.8        |
| 농식품 빅데이터 거래소 | 9.8         | 78.5             | —           |
> **데이터·AI 기반 SW/제어 개발 역량 보유 기업 비율 매우 낮음.**

### 3-5) 스마트팜(토마토) 데이터 품질 현황(검색 기반 예시)
*(요약만 표기, 세부 스크린샷 별첨 가능)*

---

## 4. 목표 및 결과물
데이터 기반 **토마토 온실 환경 자동화·최적화**를 위한 **ESP32-S3 제어 코드** 개발
- (4-1) 실측 데이터 기반 데이터셋 확보  
- (4-2) 데이터 기반 ESP32-S3 업로드용 코드 개발  
- (4-3) 코드 업로드 완료된 ESP32-S3 시제품

---

## 5. 핵심 타겟
- (5-1) 스마트팜 관련 빅3 회사 매출 규모 파악 *(요약 지표 첨부 가능)*  
- (5-2) **핵심 타겟**: 중소형 스마트팜 관련 기업
- (5-3) 스마트팜 농업 경영체
- (5-4) 정부 과제·교육 사업

기업체 활성화 요구(1,286개 설문):
| 구분     | 연구개발 | 기술지원 | 지식서비스 | 마케팅 | 인력 |
|----------|:--------:|:--------:|:----------:|:------:|:----:|
| 시설원예 | 20.2     | 6.0      | 6.2        | 21.9   | 13.8 |
| 식물공장 | 52.2     | 12.9     | 6.3        | 5.7    | 22.9 |

---

## 6. 요구사항 정의

### 6-1) 데이터셋
- 방울토마토 **전 생육기간** 데이터
- **결측·이상치 ≤ 5%**의 고품질 데이터
- 국내 센서·디바이스 **70% 이상 항목** 포함  
  - 예: 온도센서(87.6%), 습도센서(75.6%) … 등

### 6-2) 펌웨어
- **7일 주기** 최적 제어 수치 자동 반영
- Wi-Fi & BLE 포함
- 데이터 저장 파이프라인 구축
- PC/모바일 **모니터링·제어**
- 안전·예외 처리(온도 급상승, 수위 초과, 히터/모터 과열 등)
- 펌웨어 다운 시 자동 리셋

### 6-3) MCU (ESP32-S3)
- **AI 벡터 가속기(VPU)**: 8/16bit 벡터 연산, TinyML/TFLM/Edge Impulse 호환
- **멀티미디어·비전 AI**: 8-bit DVP 카메라, 실시간 영상처리/병해탐지/제스처
- **듀얼코어 병렬 처리**: 센싱·제어 vs AI·통신 분리
- **클라우드·엣지 연동** 확장성

---

## 7. 데이터 리서치 및 수집

### 7-1) 해외 스마트팜 데이터 센터
- Mendeley Data (data.mendeley.com)  
- The Plant-Phenotyping (plant-phenotyping.org)  
- Zenodo (zenodo.org)  
- **WUR Data Portal** (https://data.wur.nl/)

### 7-2) 데이터 특정 (WUR 해커톤)
- 26개국 21개팀, 200명 참여
- 목표: 방울토마토 **순이익 최적화**(수확량·품질 ↑, 자원 ↓)
- 5개 팀 실재배 → **순이익 10배 달성**
- 심사: 팀(20) + AI 접근(30) + 가상 재배 순이익(50)
- **우승팀**: *Automatoes* (Van der Hoeven, Hoogendoorn, Keygene, TU Delft)

---

## 8. 데이터 품질 검증

- 전 생육기간 및 시계열 분포(최소 5분 단위)
- 종속변수(생산량/품질)와 매개변수 컬럼 분포 점검
- **결측·이상치 평균 ≤ 5%** 목표

| 파일명              | 파 일 내 용                                   | 결측치(%) | 이상치(%) |
|--------------------|-----------------------------------------------|:---------:|:---------:|
| CropParameters.csv | 6컬럼 23행: 토마토 상태(신장·굵기·화방수 등)  | 7.25      | 1.09      |
| GreenhouseClimate.csv | 온실환경: 50컬럼 47,809행                   | 0         | 0         |
| GrodanSens.csv     | 뿌리존: 7컬럼 47,809행                        | 0         | 0         |
| LabAnalysis.csv    | 39컬럼 10행                                   | 0         | 4.59      |
| Production.csv     | 9컬럼 23행                                    | 0.48      | 3.62      |
| Resources.csv      | 7컬럼 166행                                   | 0         | 2.07      |
| TomQuality.csv     | 8컬럼 8행                                     | 3.12      | 1.56      |
| Weather.csv        | 외부날씨: 11컬럼 47,809행                     | 0.14      | 5.08      |
| **합계**           | **137컬럼 · 47,808행**                         | **1.86**  | **6.86**  |

---

## 9. 프로젝트 폴더·데이터 구조
project/

├─ data/

│ ├─ 00_raw/ # 원본(읽기 전용)

│ ├─ 01_dict/ # 데이터 딕셔너리(스키마·단위·유효범위)

│ ├─ 02_clean/ # 클린(형변환·보간·클램프)

│ ├─ 03_curated/ # 분석/모델링용 정규화 데이터

│ └─ 99_export/ # 최종 Export(CSV/DB)

├─ notebooks/

├─ src/

│ ├─ features/ # VPD/GDD 등 파생변수

│ ├─ control/ # 제어 로직(룰·ML·RL)

│ └─ pipelines/ # ETL/스케줄러

└─ README.md

------


---

## 10. 작업 분할 구조(WBS)

| 기능 구분  | 코드  | Task                         | 내용                                | 일정(일차) |
|-----------|-------|------------------------------|-------------------------------------|-----------|
| 기획      | 0.1.1 | 문제정의                      | 현황·이슈·가설 정의                 | 1 |
|           | 0.1.2 | 목표 및 결과물                | 산출물·성공지표 정의                | 2 |
|           | 0.1.3 | 핵심 타겟                     | 대상 시장·고객·채널 정의            | 3 |
| 요구정의  | 0.1.4 | 요구 사항 정의               | 데이터·펌웨어·MCU 요구사항          | 4 |
| 데이터셋  | 1.1.1 | 데이터 리서치·수집           | WUR/공공데이터/현장데이터           | 5 |
|           | 1.1.2 | 데이터 품질 검증             | 결측·이상치 점검                    | 6 |
|           | 1.2.1 | 데이터 구조 설계             | 컬럼·타임라인·메타데이터            | 7 |
|           | 1.3.1 | 결측치 보간·단위 통일         | 시계열 보간·유닛 통일               | 8 |
|           | 1.3.2 | 파생변수 생성(VPD, GDD)      | 환경·생육 지표 생성                 | 9 |
|           | 1.3.3 | 최종 데이터셋 Export         | CSV/DB Export                       | 10 |
| 제어로직  | 2.1.1 | 개발 환경 설정               | ESP32-S3/Arduino IDE/MQTT/BLE       | 11 |
|           | 2.1.2 | 제어 조건 정의               | 목표치·히스테리시스·안전한계        | 12 |
|           | 2.2.1 | 제어 알고리즘 설계           | 센서 → 액션(룰/ML/RL)               | 13 |
|           | 2.2.2 | 안전·예외 처리               | 장애·과열·통신오류 핸들링           | 14 |
|           | 2.3.1 | 펌웨어 코드 작성             | ESP32-S3 제어 코드                  | 15 |
|           | 2.3.2 | MQTT/BLE 연동·업로드         | 앱/대시보드 연동                    | 16 |
| 발표      | 3.1.1 | 발표자료·데모·피드백         | 결과 공유·향후계획                  | 17 |

---



